<html>
<head>
<title>Configuring Octopus Deploy for IPv6 - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为IPv6配置Octopus部署- Octopus部署</h1>
<blockquote>原文：<a href="https://octopus.com/blog/octopus-deploy-ipv6#2015-11-02">https://octopus.com/blog/octopus-deploy-ipv6#2015-11-02</a></blockquote>
                        <p>虽然以前在技术上可以通过<a href="https://github.com/OctopusDeploy/Halibut">比目鱼</a>设置你的触手使用IPv6协议，但这需要在触手上手动配置，因此需要知道它和服务器之间使用的是哪种特定协议。此外，只有主机名有效，无法为目标配置提供特定的IPv6地址。随着<code>3.1.7</code>中引入的变化，您的Octopus Deploy实例现在可以进入未来，闭着眼睛就可以开始使用IPv6。如果您的IOT(触须互联网)设置有耗尽内部IPv4地址的风险，那么您不必再担心了。</p>

<h2>IPv4/IPv6双模上的触角</h2>

<p>默认情况下，Octopus Deploy服务器和Tentacles现在都将使用sockets <a href="http://blogs.msdn.com/b/webdev/archive/2013/01/08/dual-mode-sockets-never-create-an-ipv4-socket-again.aspx">的双模式功能监听地址。Net 4.5 </a>。侦听触手(以及使用轮询模式时的服务器)将同时侦听IPv4和IPv6地址，但是为了简单起见，两种协议使用相同的端口。这意味着您可以根据地址为任一协议设置您的目标，它将“正常工作”。如果您在触手配置中提供其FQDN(完全合格的域名),部署时解析的地址仍将由网络堆栈在内部确定。因此，有时在您的日志中看到您的IPv4地址用IPv6符号表示，如<code>[::ffff:127.0.0.1]</code>，您应该不会感到太惊讶。</p>

<p>请记住，当在URI中指定IPv6地址时，<a href="https://www.ietf.org/rfc/rfc2732.txt">规范</a>要求将地址括在方括号中。因此，如果你的目标地址是<code>fe80::c0d3:531b:f0cf:f567</code>，那么被发现的地址将是<code>[fe80::c0d3:531b:f0cf:f567]</code>，而完整的触手URL将会沿着<code>https://[fe80::c0d3:531b:f0cf:f567]:10933/</code>的路线</p>

<p><img src="../Images/1ece9d36d61a31ef4c553ce34586da25.png" alt="Ipv6 Tentacle Discovery" data-original-src="https://i.octopus.com/blog/201511-ipv6-QEQ3.png"/></p>

<p>您还可以在浏览器中直接引用您的触手的IPv6地址来测试连通性，就像您使用普通的IPv4地址或主机名一样。</p>

<p><img src="../Images/62b2a5e5285b96e40c62294e24958241.png" alt="IPv6 Tentacle Hello" data-original-src="https://i.octopus.com/blog/201511-ipv6http-SN6P.png"/></p>

<p>如果您的触须似乎是用其IPv4地址而不是IPv6地址重新连接，记得也检查您的网络适配器在其设置中启用了此功能。</p>

<p><img src="../Images/f483260a8167dbd0ea169ea4e6de881d.png" alt="IPv6 Adapter Settings" data-original-src="https://i.octopus.com/blog/201511-ipv6enable-P6ZT.png"/></p>

<p>由于Halibut通信框架用于轮询和侦听触角，IPv6连接细节也适用于轮询触角被配置为连接到特定Octopus服务器的场景。当设置轮询触手时，您现在可以指定一个IPv6地址来连接到服务器，只要该地址用方括号括起来，并且网络配置为允许IPv6连接。也就是说，如果您提供主机名，网络堆栈将为您决定使用哪个协议。最终最简单的事情是让你的DNS做它的工作；使用主机名，不要触摸任何东西，正确的协议将在必要时使用。</p>

<h1>将触手独占绑定到IPv4</h1>

<p>如果出于某种原因，你希望强制触手只监听IPv4地址，这可以通过利用内置的<code>configure</code>命令来设置。</p>

<pre><code>Tentacle.exe configure --listenIpAddress 0.0.0.0
</code></pre>

<p>此配置可以通过调用</p>

<pre><code>Tentacle.exe configure --listenIpAddress any
</code></pre>

<h1>进一步的问题</h1>

<p>如果您担心您的基础设施不支持IPv6，请不要担心。虽然默认情况下，Octopus现在将通过任一协议进行通信，但如果您的目标使用主机名或IPv4地址进行配置，它们将悄悄地退回到仅侦听IPv4，而不需要任何额外的配置。我们关于<a href="http://docs.octopusdeploy.com/display/OD/Troubleshoot+Listening+Tentacles">触手故障排除</a>的文档页面也提供了一些其他有用的提示和资源，帮助你与触手对话。</p>

                    
                    
</body>
</html>