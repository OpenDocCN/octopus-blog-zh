<html>
<head>
<title>RFC: Cloud Regions - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>RFC:云区域- Octopus部署</h1>
<blockquote>原文：<a href="https://octopus.com/blog/rfc-cloud-regions#2016-04-14">https://octopus.com/blog/rfc-cloud-regions#2016-04-14</a></blockquote>
                        <h2>TL；dr；</h2>

<p>我们正在考虑引入一个新的目标类型，被称为云区。云区域目标将使在Octopus服务器上执行的步骤能够多次执行，变量的作用范围是每次迭代。这种设计支持的特定场景是将Azure步骤(Web应用、云服务、PowerShell)部署到多个地区。</p>

<h2>一点历史</h2>

<p>在Octopus Deploy 3.0版本中，我们为Azure引入了两个特定的部署目标，即Web应用和云服务。然后我们<a href="https://octopus.com/blog/azure-changes">改变了我们的想法</a>，在<a href="https://octopus.com/blog/octopus-deploy-3.1-pre-release#azure-step-types">3.1版本</a>中，回复到使用步骤而不是Azure部署的目标，放弃那些目标(尽管它们目前仍然可用)。</p>

<p>虽然我们对任何不便或困惑深表歉意，但我们总体上对这一变化非常满意。然而...</p>

<p>有一个场景，许多客户反映使用目标比步骤建模更好:将相同的组件(web app、云服务等)部署到多个Azure区域。在3.0模型中，他们简单地为每个区域创建了一个目标。目前，可以选择每个区域使用一个Octopus环境，或者每个区域使用一个step。客户反馈说这两个选项都不可取。我们同意。这导致我们在删除已被否决的Azure目标时犹豫不决。</p>

<h2>介绍云区域</h2>

<p>创建新目标时，云区域将作为一个选项出现。</p>

<p><img src="../Images/a37c6ed6850c9eac3b68186c8e86fbcf.png" alt="Cloud Region Target" data-original-src="https://i.octopus.com/blog/201604-2016-04-0715_35_30-cloud_region_target-PEQY.png"/></p>

<p>与任何目标一样，可以为云区域目标分配名称和角色。</p>

<p><img src="../Images/3954e284730cfcfc2f63ee4560da9252.png" alt="Cloud Region Target Details" data-original-src="https://i.octopus.com/blog/201604-2016-04-0715_40_07-cloud_region_details-TSJY.png"/></p>

<p>云区域将出现在您的环境中，就像任何目标一样。</p>

<p><img src="../Images/5eb5d85d6a30ca8382e812710880566b.png" alt="Cloud Region Targets in Environment" data-original-src="https://i.octopus.com/blog/201604-2016-04-0715_48_45-cloud_target_environment-VRKV.png"/></p>

<p>您可以像对待任何目标一样，将变量作用于它们。</p>

<p><img src="../Images/3139fca384d684e9c2c067df98874c4e.png" alt="Cloud Region Variables" data-original-src="https://i.octopus.com/blog/201604-2016-04-0722_48_54-cloud_region_variables-4L36.png"/></p>

<p>但是现在你的Azure步骤要么只运行一次，<em>要么</em>为每个匹配指定角色的目标运行一次。</p>

<p>请注意在下面的部署Azure Web应用程序步骤中配置的角色和Web应用程序名称变量的使用。</p>

<p><img src="../Images/7a5ca063f4e8b3e75048a5e6d0890430.png" alt="Azure Web App Step" data-original-src="https://i.octopus.com/blog/201604-2016-04-0722_55_51-cloud_region_web_app_step-FDEJ.png"/></p>

<p>部署步骤时，它将针对每个匹配的云区域目标运行一次。</p>

<p><img src="../Images/3e3c648f694fa1ef96d25f2115ccc7db.png" alt="Cloud Region Deployment Log" data-original-src="https://i.octopus.com/blog/201604-2016-04-0723_25_07-cloud_region_deploy_log-ZR4J.png"/></p>

<p><strong>注意:</strong>使用带有Azure步骤的云区域目标将是完全可选的。如果你目前正在使用Azure步骤，你不需要做任何改变。他们将完全按照目前的方式工作。</p>

<h2>不仅仅是蔚蓝</h2>

<p>尽管这种目标类型的动机来自Azure regions，但是这些目标也可以被常规的<em>运行脚本</em>步骤使用。这意味着任何人都可以使用不同的变量值多次运行一个脚本步骤，而无需安装触须，从而利用云区域。例如，在生产和灾难恢复数据库服务器上运行相同的SQL脚本。</p>

<h2>反馈</h2>

<p>一如既往，我们非常重视您的反馈。</p>

<p>如果你目前使用的是被否决的3.0 Azure目标，我们特别想听听你的意见。我们不喜欢用两种方法来部署Azure组件(步骤和目标)。这让用户感到困惑，我们需要做更多的工作来维护。我们的希望是，这将解决区域问题，并允许我们(问心无愧地)逐步删除不赞成的3.0 Azure目标。</p>

                    
                    
</body>
</html>