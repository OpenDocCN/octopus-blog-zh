<html>
<head>
<title>Import and export projects and releases with Octo.exe - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Octo.exe-八达通部署的进出口项目和发布</h1>
<blockquote>原文：<a href="https://octopus.com/blog/octo-exe-import-export#2015-09-25">https://octopus.com/blog/octo-exe-import-export#2015-09-25</a></blockquote>
                        <p><strong>Octo.exe</strong>，自动化Octopus部署的命令行工具，现在有两个新命令:<code>export</code>和<code>import</code></p>

<p>这些命令可以用于在不同位置部署多个Octopus服务器的场景。例如，一台Octopus服务器用于设置和测试新项目，然后在位于完全不同的隔离网络上的另一台生产服务器上创建项目。以前，如果您想要同步两台服务器，您必须手动重新创建您已经在测试服务器上创建的项目和发布。</p>

<p>目前我们支持导出和导入:</p>

<ul>
<li>项目和任何依赖项</li>
<li>项目的一个版本或一系列版本</li>
</ul>

<h2>出口</h2>

<p><a href="http://docs.octopusdeploy.com/display/OD/Export">命令用法</a></p>

<h4>导出项目</h4>

<p>让我们假设您在测试Octopus Deploy服务器上设置和部署了以下项目，并且您想要将Octopus FX Rate服务项目复制到您的生产Octopus Deploy服务器上。</p>

<p><img src="../Images/0342719ee2878088ab0e7d2907a715c4.png" alt="Dashboard" data-original-src="https://i.octopus.com/blog/migrated/Export_Dashboard_s9zng8.png"/></p>

<p>要导出OctoFX利率服务项目，您可以在命令提示符下执行以下命令:</p>

<pre><code>octo export --server=http://octopusserver/ --apiKey=API-EXPORTERAPIKEY --type=project --name="OctoFX Rate Service" --filePath="C:\path\to\export\file.json"
</code></pre>

<p>该命令将连接到Octopus服务器，获取所有信息，并将其写入JSON文件。你可以在文档中了解更多关于文件<a href="http://docs.octopusdeploy.com/display/OD/Export">的内容。</a></p>

<h4>导出项目的一个版本或一系列版本</h4>

<p><img src="../Images/fd6c06afc90fe0b8a2251d1e3c51436a.png" alt="Releases" data-original-src="https://i.octopus.com/blog/migrated/Export_Releases_tij0ps.png"/></p>

<p>要导出OctoFX利率服务项目的版本，您可以在命令提示符下执行以下命令:</p>

<pre><code>octo export --server=http://octopusserver/ --apiKey=API-EXPORTERAPIKEY --type=release --project="OctoFX Rate Service" --releaseVersion=2.7.2067 --filePath="C:\path\to\export\file.json"
</code></pre>

<p>或者对于一系列版本:</p>

<pre><code>octo export --server=http://octopusserver/ --apiKey=API-EXPORTERAPIKEY --type=release --project="OctoFX Rate Service" --releaseVersion=2.7.2063-2.7.2067 --filePath="C:\path\to\export\file.json"
</code></pre>

<p>该命令将连接到Octopus服务器，获取发行版，并将其写入JSON文件。你可以在文档中了解更多关于文件<a href="http://docs.octopusdeploy.com/display/OD/Export">的内容。</a></p>

<h2>进口</h2>

<p><a href="http://docs.octopusdeploy.com/display/OD/Import">命令用法</a></p>

<h4>导入项目</h4>

<p>当将项目导入另一个Octopus Deploy服务器时，要导入的Octopus Deploy服务器中必须已经存在以下内容:</p>

<ul>
<li>项目使用的项目组</li>
<li>项目中使用的环境</li>
<li>项目中使用的机器</li>
<li>项目中使用的NuGet提要</li>
<li>项目中使用的库变量集(如果有)</li>
</ul>

<p>一旦满足了这些先决条件，要导入我们在上一个示例中导出的OctoFX Rate服务，您需要在命令提示符下执行以下命令:</p>

<pre><code>octo import --server=http://octopusserver --apiKey=API-IMPORTERAPIKEY --type=project --filePath="C:\path\to\export\file.json"
</code></pre>

<p>如果缺少一个先决条件，输出应该类似于<a href="http://docs.octopusdeploy.com/display/OD/Import#ImportingOctopusDeployObjects-projectimportoutputmissingprerequisite">项目导入输出当缺少先决条件时</a></p>

<p>否则，输出应该类似于<a href="http://docs.octopusdeploy.com/display/OD/Importing+Octopus+Deploy+Objects#ImportingOctopusDeployObjects-projectimportoutput">项目导入输出</a></p>

<p>如果项目中有标记为<code>Sensitive</code>(即密码)的变量，您将在输出中收到一条警告，通知您必须通过UI更新该值才能使用，因为我们不导出敏感变量的值。</p>

<p>在Octopus Deploy中，您现在应该可以看到您导入的项目。</p>

<p><img src="../Images/71af36b53a961dac440af2064c6d9af3.png" alt="Dashboard" data-original-src="https://i.octopus.com/blog/migrated/Import_Dashboard_jhcy5f.png"/></p>

<h4>导入版本/版本范围</h4>

<p>当导入一个版本或一系列版本时，项目必须存在于运行导入的Octopus Deploy上。</p>

<p>要为项目导入一个版本或一系列版本，您可以运行以下命令:</p>

<pre><code>octo import --server=http://octopusserver/ --apiKey=API-IMPORTERAPIKEY --type=release --project=projectname --filePath=C:\path\to\export\file.json
</code></pre>

<p>输出应该类似于<a href="http://docs.octopusdeploy.com/display/OD/Import#ImportingOctopusDeployObjects-releaseimportoutput">发布导入输出</a></p>

<p>如果您现在转到项目页面上的Release选项卡，您应该会看到刚刚导入的新版本。</p>

<p><img src="../Images/70d6acd21d65785849c886b0c0649f92.png" alt="Project Releases" data-original-src="https://i.octopus.com/blog/migrated/Import_Project_Releases_ijk7we.png"/></p>

<h2>摘要</h2>

<p>希望您会发现这是一个在Octopus服务器之间迁移项目/发布的有用工具。虽然这个工具可以用于许多场景，但是您的场景很可能会有所不同。请记住<a href="https://github.com/OctopusDeploy/Octopus-Tools">Octo.exe是开源的</a>——可以随意使用它作为起点，并定制和扩展它以满足您的需求。</p>

                    
                    
</body>
</html>