<html>
<head>
<title>Deploying SQL Server Reporting Services (SSRS) reports with Octopus - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Octopus - Octopus Deploy部署SQL Server Reporting Services(SSRS)报表</h1>
<blockquote>原文：<a href="https://octopus.com/blog/deploying-ssrs#2021-08-12">https://octopus.com/blog/deploying-ssrs#2021-08-12</a></blockquote>
                        <p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/deploying-ssrs.png" class="zoom" data-title=""><img src="../Images/6925050af1fdd522b7aefd451af37c37.png" class="img-fluid center" alt="Deploying SSRS with Octopus Deploy" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/deploying-ssrs.png"/>T2】</a></p>

<p>当您想到自动化应用程序部署时，通常想到的是自动化部署web代码、容器和/或数据库。在本系列中，我将演示如何自动化支持组件，如SQL Server Integration Services(SSIS)包和SQL Server Reporting Services(SSRS)报表。</p>



<hr/>

<p>收集和存储数据通常是web应用程序的主要功能。需要分析收集到的数据，并以图形格式显示出来，以帮助做出决策。这通常采用报告的形式。SQL Server Reporting Services(SSRS)是微软的报告解决方案。SSRS是一个基于web的应用程序，可以使用许多不同的数据源来为用户填充报告。在本系列的这一部分中，我将演示如何使用Octopus Deploy部署SSRS报表。</p>

<h2 id="build-the-project">构建项目</h2>

<p>截至Visual Studio (VS) 2017，MSBuild可以构建。rtpproj文件。在Visual Studio的旧版本中创建的项目将需要配置类似于我的<a href="/blog/deploying-ssis"> SSIS邮报</a>的构建代理，以便使用Visual Studio itslef(devenv . exe)来构建项目。这篇文章利用Azure DevOps作为构建平台，但是任何可以使用MSBuild的构建服务器都可以做到这一点(针对VS 2017+)。</p>

<h3 id="add-the-build-task">添加构建任务</h3>

<p>要生成SSRS项目，只需将任何MSBuild类型的任务添加到您的生成定义中。对于我的构建定义，我选择了一个Visual Studio构建任务，它调用MSBuild:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/ado-build-visual-studio-build.png" class="zoom" data-title=""><img src="../Images/de36be4b3928fe34f6a90af572fec220.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/ado-build-visual-studio-build.png"/>T2】</a></p>

<h3 id="package-the-artifacts">打包工件</h3>

<p>当构建SSRS项目时，它将构建的报告放入<code>bin</code>文件夹中。在本例中，他们在<code>Reports/Reports/bin/release</code> We中将这些报告打包成一个. zip或. nupkg包进行部署。对于这篇文章，我选择。nupkg格式:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/ado-pack-task.png" class="zoom" data-title=""><img src="../Images/d049da057469e5dfc26e1788c9029769.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/ado-pack-task.png"/>T2】</a></p>

<h3 id="push-the-artifacts">推动藏物</h3>

<p>既然我们已经打包了工件，我们可以将它们推送到我们的Octopus Deploy服务器:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/ado-push-task.png" class="zoom" data-title=""><img src="../Images/7d479d9fdabeb80c4c3acaf5f2497b9e.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/ado-push-task.png"/></a>T2】</p>

<p>这就是我们构建定义所需要的。</p>

<h2 id="octopus-deploy">章鱼部署</h2>

<p>现在，我们已经在Octopus Deploy中拥有了我们的工件，我们可以为部署创建我们的项目。</p>

<h3 id="create-the-project">创建项目</h3>

<p>点击<strong>项目</strong>，然后<strong>添加项目</strong>:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-create-project.png" class="zoom" data-title=""><img src="../Images/e3f8facd3052b9eff892b78c5ea322f2.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-create-project.png"/>T2】</a></p>

<h3 id="deploy-the-package">部署包</h3>

<p>我们流程的第一步是将包部署到SSRS服务器。点击<strong>添加步骤</strong>:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-add-step.png" class="zoom" data-title=""><img src="../Images/a36991c19ccb3d253461fabfde39b02a.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-add-step.png"/>T2】</a></p>

<p>添加一个部署包步骤，并选择我们推送到Octopus服务器的包:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-add-deploy-package.png" class="zoom" data-title=""><img src="../Images/85bcf26f86c25969982cb8146d66fe9f.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-add-deploy-package.png"/>T2】</a></p>

<p>添加步骤后，填写文本框:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-deploy-package1.png" class="zoom" data-title=""> <img src="../Images/60015ca5852260ed933d1ecb8cbc842e.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-deploy-package1.png"/> </a> <a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-deploy-package2.png" class="zoom" data-title=""> <img src="../Images/19d22e4844f343de107c55ece345c9e2.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-deploy-package2.png"/></a></p>

<h3 id="add-the-ssrs-step">添加SSRS步骤</h3>

<p>为了部署SSRS报告，我添加了一个社区步骤模板。按SSRS筛选步骤，并从程序包步骤中选择部署SSRS报表:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-ssrs-step.png" class="zoom" data-title=""><img src="../Images/8213410eceaeab5476d311f598758096.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-ssrs-step.png"/>T2】</a></p>

<p>此步骤需要在部署包的同一目标上执行，对于执行位置，选择部署目标并填写您在部署包步骤中选择的相同角色:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-ssrs-step1.png" class="zoom" data-title=""><img src="../Images/5c0b513462352b5eba91ceebb6b57d37.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-ssrs-step1.png"/>T2】</a></p>

<p>填写该步骤的值。</p>

<ul>
<li><strong> SSRS包步骤</strong>:这是我们之前创建的部署包步骤。</li>
<li><strong>SSRS服务器服务的URL</strong>:这是报表服务web服务的URL。比如http://servername/ReportServer/reportservice 2010 . asmx？wsdl。</li>
<li><strong>报表执行Url </strong>:这是报表执行web服务的Url。比如http://servername/ReportServer/report execution 2005 . asmx？wsdl。</li>
<li><strong>报表文件夹</strong>:报表将要部署到的文件夹的相对路径。比如<code>/MyFolder</code>。</li>
<li><strong>报表数据源文件夹</strong>:数据源将要部署到的文件夹的相对路径。比如<code>/MyFolder/MyDataSources</code>。</li>
<li><strong>覆盖数据源</strong>:如果您想在部署时覆盖数据源，请选中此项。</li>
</ul>

<p>要指定数据源细节，您需要创建Octopus Deploy变量来匹配要覆盖的数据源。可以覆盖以下属性:</p>
<ul>
<li>连接字符串</li>
<li>用户名</li>
<li>密码</li>
</ul>
<p>例如，如果数据源的名称是<code>MyDatasource</code>，变量将是:</p>
<ul>
<li>我的数据源。连接字符串</li>
<li>我的数据源。用户名</li>
<li>我的数据源。密码</li>
</ul>
<p>如果用户名和密码用于一个域帐户，您需要创建一个名为<code>MyDatasource.WindowsCredentials</code>的额外变量，其值为<code>True</code>。</p>


<ul>
<li><strong>备份位置(可选)</strong>:在覆盖报表之前，在部署目标上备份报表的位置。</li>
<li><strong>数据集文件夹(可选)</strong>:共享数据集将要部署到的文件夹的相对路径。比如<code>/MyFolder/MyDatasets</code>。</li>
<li><strong>报表部件文件夹(可选)</strong>:报表部件将要部署到的文件夹的相对路径。比如<code>/MyFolder/MyReportParts</code>。</li>
<li><strong>服务域(可选)</strong>:部署时使用的账户域名。</li>
<li><strong>服务用户名(可选)</strong>:部署时使用的帐户用户名。</li>
<li><strong>服务密码(可选)</strong>:用户部署时使用的密码。</li>
<li><strong>清除报告文件夹</strong>:如果您想在部署之前从目标文件夹中删除报告，请选中此框。</li>
<li><strong>使用包文件夹结构</strong>:如果您希望该步骤遵循包中包含的文件夹结构，选中此框。该设置忽略<code>Report folder</code>、<code>Report data source folder</code>和<code>DataSet folder</code>设置。</li>
<li><strong>根文件夹</strong>:专门与<code>Use package folder structure</code>选项一起使用，指定这个项目在SSRS文件夹中的根位置。</li>
</ul>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-ssrs-step-complete.png" class="zoom" data-title=""><img src="../Images/169f602b2de98c185077033d2272ad42.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-ssrs-step-complete.png"/>T2】</a></p>

<p>步骤到此为止。我们现在准备部署。</p>

<h2 id="deploy-the-reports">部署报告</h2>

<p>流程完成后，让我们创建一个发布。点击<strong>创建发布</strong>:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-create-release.png" class="zoom" data-title=""><img src="../Images/7084ed0eecf87026cf28a3a2d2895a4f.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-create-release.png"/>T2】</a></p>

<p>点击<strong>保存</strong>后，选择部署环境:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-create-deployment1.png" class="zoom" data-title=""><img src="../Images/ae3ff42d73ed1836e7c82975bd3d11a1.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-create-deployment1.png"/>T2】</a></p>

<p>点击<strong>部署</strong>:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-create-deployment2.png" class="zoom" data-title=""><img src="../Images/ed11d63e85f7927b89ff5ea7c9b62d88.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-create-deployment2.png"/>T2】</a></p>

<p>部署完成后，它应该如下所示:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-04/deploying-ssrs/octopus-project-deploy-complete.png" class="zoom" data-title=""> T31 </a></p>

<h2 id="conclusion">结论</h2>

<p>在这篇文章中，我演示了使用Octopus Deploy部署SSRS报表是多么容易。愉快的部署！</p>

                    
                    
</body>
</html>