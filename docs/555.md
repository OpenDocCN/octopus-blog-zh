# 章鱼部署对木偶/厨师-章鱼部署

> 原文：<https://octopus.com/blog/octopus-vs-puppet-chef>

在支持网站上， [Dmitry 问](http://octopus-deploy.tenderapp.com/discussions/questions/2083-octopus-vs-puppet):

> 嗨，我们怎么能说 Octopus Deploy 比 Puppet 或类似工具好得多呢？
> 
> 几年来，我一直在批评我们的系统管理员，试图让他们设置服务的自动部署。最后我放弃了。然后我听说了 Octopus 的部署，我自己用 Octopus 做了所有的事情。我们对八达通很满意，我们已经购买了许可证，我认为我们不需要其他任何东西。但是最近我们的系统管理员告诉我，他们将使用 Puppet 设置自动部署，看起来我们将不得不放弃我们的 Octopus 部署，转而使用 Puppet。

![Octopus vs. Puppet](img/6f0c14f3ae75c8fc9153ea17c5160d5d.png)

我不打算争论章鱼比木偶或厨师“更好”；相反，我要说的是章鱼和木偶是不同的。其实我觉得没什么理由选。

Puppet 和 Chef 是配置管理工具。他们通过描述系统应该处于的状态来工作，并采取措施确保系统处于该状态。

例如，假设您正在管理 30 台 web 服务器。您可以使用 Puppet 或 Chef 来指定以下内容，而不是使用 remote desktop 来配置它们、安装 Windows 组件、启用功能等等:

*   所有 web 服务器都应该配置 IIS 并启用 Windows 身份验证模块
*   MSMQ 应该已经安装并正在运行
*   位于`C:\Logs`的文件夹应该存在，并且可以被给定的用户帐户写入

相反，Octopus Deploy 是一个发布自动化工具。八达通对“期望状态”不起作用；相反，它是一个编排工具，以非常特定的顺序运行各个步骤。比起木偶或厨师，它更接近于像 [Nolio](http://www.ca.com/us/content/integration/nolio.aspx) 或 [UrbanDeploy](http://www-03.ibm.com/software/products/en/ucdep/) (没有安装它所需的价格标签或顾问大军 **:-)** )这样的工具。

Octopus 是如下部署的理想选择:

1.  将负载平衡器重定向到“停机维护”站点
2.  从负载平衡器中删除 web 服务器
3.  停止应用程序服务器
4.  备份和升级数据库
5.  启动应用程序服务器
6.  将 web 服务器添加回负载平衡器

或者这个:

1.  发送消息将应用程序置于“只读”模式
2.  应用数据库迁移
3.  所有 web 服务器的滚动部署:
    1.  从负载平衡器中移除
    2.  将 web 应用程序更新至最新版本
    3.  添加回负载平衡器
4.  当有人检查系统时通知并暂停，以确保一切正常
5.  发送消息以重新启用写模式

如果你能用一个清单来描述你的自动化，并且顺序/时间并不重要，那么木偶/厨师会工作得很好。当秩序很重要时，八达通很好用。例如，在迁移数据库之前不能更新 web 应用程序，否则会出现混乱。

现在，您可以让 Octopus 使用 PowerShell 来执行您的基础架构供应和配置管理任务，许多人都这样做。但是对于基础设施自动化和新系统的供应，我同意使用 Puppet，如果您已经掌握了技能，将是一个更好的选择:工作流更适合于此。

## 结论:两者并用

如果您的系统管理员发现像 Puppet 这样的工具最适合他们，那么无论如何他们都应该使用 Puppet。这是一个为系统管理员可能需要的自动化类型而设计的很好的工具。当涉及到频繁地将更新部署到您正在构建的应用程序，或者允许 QA 进行[自助部署](http://octopusdeploy.com/blog/self-service-deployments)时，Octopus 更适合这种情况。

使用 Puppet 提供基础设施并确保一切准备就绪，使用 Octopus 在这些系统上连续交付您的应用程序。

如果开发团队喜欢一种工具，而系统管理员喜欢另一种，这可能是因为不同的工具更适合他们特定的场景、目标和约束。一个并不比另一个好；它们只是为不同的事情而设计，为了真正的生产力，我们应该利用这一点。

* * *

您认为这两套工具之间的主要区别是什么？你什么时候会用木偶/厨师，什么时候会用章鱼？让我们帮助德米特里。

哦，最后一件事:如果你用八达通，你就不用学 Ruby，穿得像个潮人。尼尔尼尔尼尔。 **:-)**