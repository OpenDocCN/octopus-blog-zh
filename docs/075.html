<html>
<head>
<title>What does Microsoft deprecating Azure Service Management APIs mean for Octopus Users? - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>微软贬低Azure服务管理API对八达通用户意味着什么？-章鱼部署</h1>
<blockquote>原文：<a href="https://octopus.com/blog/azure-management-certs#2021-07-07">https://octopus.com/blog/azure-management-certs#2021-07-07</a></blockquote>
                        <h2 id="tldr">TL；dr；</h2>

<p>Azure已经否决了Azure服务管理API，为了更好地利用新工具，从版本<code>2018.12.0</code>开始，Octopus将不再在使用Azure证书帐户时主动从门户中检索云服务或存储帐户详细信息。尽管有这些UI变化，部署将继续工作，并且仍然可以创建使用它们的新步骤。</p>

<h2 id="the-longer-story">更长的故事</h2>

<p>Azure服务管理(ASM) API是以编程方式与您的Azure资源进行交互的原始机制，直到Azure资源管理器(ARM) API在<a href="https://channel9.msdn.com/Events/Build/2014/2-607" rel="nofollow"> 2014 </a>可用。</p>

<p>ARM API是用于与Azure交互的新(更)API，引入了资源组等概念，以更好地对相关资源进行建模，并为旧API中不可用的一些新服务提供支持。因此，他们已经开始反对旧的ASM。引用Naveed Aziz在Azure团队博客上的话</p>

<blockquote class="blockquote">
<p>...服务管理API已经过时，不太适合现代云。</p>
</blockquote>

<p>那很好，对吗？放弃旧的API而支持新的API通常不是什么大问题，只需修改几行代码，很快，您就会遇到一些新的端点，并且您的XML有效负载变成了JSON...问题是Azure并没有将所有可用的功能从ASM转移到ARM。</p>

<h3 id="management-certificates">管理证书</h3>

<p>首先，ARM不支持使用管理证书进行身份验证，而是指导用户使用Azure Active Directory并创建服务主体。这种认证机制在Octopus中已经有一段时间了，我们建议任何仍在使用Azure证书的人今天就<a href="https://octopus.com/docs/infrastructure/accounts/azure#azure-service-principal">升级到服务主体</a>。对这一变化的一个警告是由于一个仅适用于管理证书的特性，因为它在ASM中仅<em>支持</em>。</p>

<h3 id="azure-cloud-services">Azure云服务</h3>

<p>Azure云服务是Azure为托管客户网站提供简单PaaS模型的首批尝试之一。当Azure去年概述ASM的退役时，不太明显的是，这也对使用Azure云服务本身的能力产生了影响，因为没有办法使用新的ARM APIs来管理这些服务。在与Azure团队进一步讨论后，实际的HTTP API端点似乎仍然可用，因为Visual Studio本身实际上需要使用它们。然而，由于唯一可以利用它们的工具已经被弃用，我认为可以肯定Azure渴望人们放弃云服务。</p>

<h2 id="how-will-these-changes-affect-my-deployments">这些变化将如何影响我的部署？</h2>

<p>简而言之，它根本不会影响<em>的部署</em>。😃对于Octopus用户来说，上述可用API的变化意味着，为了使用<em>新的</em>库，我们将不再能够在门户中使用旧的。因此<strong>如果你使用Azure管理证书，那么在配置目标或云服务部署步骤时，Octopus服务器将不再自动填充任何Azure云服务或存储帐户。然而，部署将继续工作，并且仍然可以创建新的目标&amp;步骤</strong>。</p>

<p>不要像这样选择您的云服务:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-01/azure-management-certs/before.png" class="zoom" data-title=""><img src="../Images/f4759300deb7ffbb6911eb94b7b78c15.png" class="img-fluid center" alt="before" data-original-src="https://i.octopus.com/blog/2019-01/azure-management-certs/before.png"/>T2】</a></p>

<p>将为您提供一组文本字段。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-01/azure-management-certs/after.png" class="zoom" data-title=""><img src="../Images/830c9bfed960e634b038bb586db6cbb4.png" class="img-fluid center" alt="before" data-original-src="https://i.octopus.com/blog/2019-01/azure-management-certs/after.png"/>T2】</a></p>

<p>(顺便说一下，这实际上与我们最初公开这些特性的方式没有太大的不同。)</p>

<p>这种变化将同时出现在<a href="https://octopus.com/docs/infrastructure/deployment-targets/azure/cloud-service-targets"> Azure云服务目标</a>和Azure云服务部署步骤上(如果选择了“遗留”模式)</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-01/azure-management-certs/step.png" class="zoom" data-title=""> T2 </a> T4 <img src="../Images/a5446634a5ec6b8a9649b3de2e2e8a5e.png" class="img-fluid center" alt="target" data-original-src="https://i.octopus.com/blog/2019-01/azure-management-certs/target.png"/> T6】</p>

<p>这些变化将从Octopus服务器版本<code>2018.12.0</code>开始出现。</p>

<h3 id="onwards-and-upwards">向前和向上</h3>

<p>为了继续使您的部署与Azure提供的越来越多的功能更容易集成，当<a href="https://azure.microsoft.com/en-au/updates/deprecating-service-management-apis-support-for-azure-app-service/" rel="nofollow">他们说</a>:</p>

<blockquote class="blockquote">
<p>支持服务管理API将会阻碍我们在全球范围内交付优质的开发人员体验和控制。</p>
</blockquote>

<p>虽然在幕后，我们将继续提供使用云服务管理证书执行部署的能力，但从Octopus门户中删除这些库意味着我们必须删除一些以前可用的功能。尽管努力保持向后兼容性是我们决策的一个关键部分，但有时旧的功能不得不被放弃。</p>

                    
                    
</body>
</html>