<html>
<head>
<title>Selenium series: The Maven POM file - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Selenium系列:Maven POM文件- Octopus部署</h1>
<blockquote>原文：<a href="https://octopus.com/blog/selenium/2-the-maven-pom-file/the-maven-pom-file#2022-07-07">https://octopus.com/blog/selenium/2-the-maven-pom-file/the-maven-pom-file#2022-07-07</a></blockquote>
                        <p>这篇文章是关于<a href="/blog/selenium/0-toc/webdriver-toc">创建Selenium WebDriver测试框架</a>的系列文章的一部分。</p>

<p>建立我们的Java项目的第一步是创建一个Maven项目对象模型(POM)文件。这是一个XML文档，它定义了我们的代码将如何构建，它可以访问哪些附加的依赖项，以及测试如何运行。</p>

<p>我们从下面显示的POM文件开始:</p>

<pre><code class="language-xml">&lt;project 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.octopus&lt;/groupId&gt;
  &lt;artifactId&gt;webdrivertraining&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;selenium.version&gt;3.14.0&lt;/selenium.version&gt;
    &lt;junit.version&gt;4.12&lt;/junit.version&gt;
  &lt;/properties&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.1&lt;/version&gt;
        &lt;configuration&gt;
          &lt;source&gt;${java.version}&lt;/source&gt;
          &lt;target&gt;${java.version}&lt;/target&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;
      &lt;version&gt;${selenium.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;${junit.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre>

<p>让我们分解这个POM文件来理解各个组件。</p>

<h2 id="project-element">项目元素</h2>

<p>顶层是<code>&lt;project&gt;</code>元素:</p>

<pre><code class="language-xml">&lt;project 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;!-- ... --&gt;
&lt;/project&gt;
</code></pre>

<p>所有Maven POM文件都有一个<code>&lt;project&gt;</code>元素作为根元素，属性定义了XML名称空间和Maven XML模式的细节。</p>

<p>元素定义了POM版本。该元素唯一支持的值是<code>4.0.0</code>。</p>

<p><a href="https://maven.apache.org/pom.html#Quick_Overview" rel="nofollow">https://maven.apache.org/pom.html#Quick_Overview</a>详细介绍了组成POM文件的元素。</p>

<h2 id="group-artifact-and-version">组、工件和版本</h2>

<p><code>&lt;groupId&gt;</code>、<code>&lt;artifactId&gt;</code>和<code>&lt;version&gt;</code>元素定义了这个项目产生的Maven工件的身份。这些值有时被组合起来，缩写为GAV。</p>

<p><code>groupId</code>通常采用反向域名的形式，尽管这只是惯例，并不是严格的要求。我们使用了值<code>com.octopus</code>，它是URL【https://octopus.com/】的域名<a href="https://octopus.com/">的反义词。</a></p>

<p><code>groupId</code>和<code>artifactId</code>的组合必须是唯一的，因为许多项目可能共享<code>groupId</code>，所以用<code>artifactId</code>来描述这个项目。</p>

<p>如您所料，<code>version</code>元素定义了这个库的版本。<code>1.0-SNAPSHOT</code>的值意味着该代码正在向1.0版本努力，但是还没有达到稳定:</p>

<pre><code class="language-xml">&lt;groupId&gt;com.octopus&lt;/groupId&gt;
&lt;artifactId&gt;webdrivertraining&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
</code></pre>

<h2 id="packaging">包装</h2>

<p>元素定义了Maven将产生的工件的类型。在我们的例子中，我们正在生成一个JAR文件:</p>

<pre><code class="language-xml">&lt;packaging&gt;jar&lt;/packaging&gt;
</code></pre>

<h2 id="properties">性能</h2>

<p><code>&lt;properties&gt;</code>元素为属性定义了值，这些值可以被Maven直接识别，也可以作为共享公共值的一种方式在POM文件中被引用。</p>

<p>这里我们已经设置了<code>project.build.sourceEncoding</code>属性，这是一个由Maven识别的设置，它定义了我们的代码所依赖的依赖项的版本，并在<code>java.version</code>属性中定义了我们的代码将要编译的Java版本:</p>

<pre><code class="language-xml">&lt;properties&gt;
  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
  &lt;java.version&gt;1.8&lt;/java.version&gt;
  &lt;selenium.version&gt;3.12.0&lt;/selenium.version&gt;
  &lt;junit.version&gt;4.12&lt;/junit.version&gt;
&lt;/properties&gt;
</code></pre>

<p>属性<code>project.build.sourceEncoding</code>被设置为<code>UTF-8</code>以指定跨操作系统的Java源文件的一致编码。如果未设置该值，不同的操作系统会认为Java文件具有不同的编码，这可能会在代码由不同的人或服务编译时导致问题。在后面的文章中，我们将配置一个基于Linux的外部服务来为我们构建代码，设置这个属性意味着我们的构建将按预期工作，不管我们在本地使用什么操作系统开发代码。</p>

<h2 id="plugins">插件</h2>

<p>接下来的设置配置Maven构建过程的某些方面。Maven项目有一个众所周知的默认生命周期，它包含以下默认阶段，如下图所示。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image1.png" class="zoom" data-title=""><img src="../Images/313df6b6ea6532fab6034d1610995795.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image1.png"/>T2】</a></p>

<ul>
<li>clean -删除上一次构建生成的所有文件。</li>
<li>验证-验证项目是正确的，并且所有必要的信息都是可用的。</li>
<li>编译-编译项目的源代码。</li>
<li>使用合适的单元测试框架测试编译后的源代码。这些测试不需要打包或部署代码。</li>
<li>打包——将编译好的代码打包成可分发的格式，比如JAR。</li>
<li>验证-对集成测试的结果进行检查，以确保符合质量标准。</li>
<li>install——将包安装到本地存储库中，作为本地部署的其他项目的依赖项。</li>
<li>站点-生成项目的站点文档。</li>
<li>部署——在集成或发布环境中完成，将最终的包复制到远程存储库中，以便与其他开发人员和项目共享。</li>
</ul>

<p>请参见<a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference" rel="nofollow">https://maven . Apache . org/guides/introduction/introduction-to-the-life cycle . html # life cycle _ Reference</a>了解Maven生命周期阶段的完整列表。</p>

<p>每个阶段都由一个插件公开的目标来执行，每个插件都可以在嵌套在<code>&lt;build&gt;&lt;plugins&gt;</code>元素下的<code>&lt;plugin&gt;</code>元素中配置。</p>

<p>对于我们的项目，我们需要配置<code>maven-compiler-plugin</code>，它用于在编译阶段编译我们的Java代码，以指示它构建与Java 1.8兼容的工件。</p>

<p>Java版本的配置是通过<code>&lt;source&gt;</code>和<code>&lt;target&gt;</code>元素完成的。这些元素的值都被设置为<code>${java.version}</code>，这就是我们引用前面在<code>&lt;properties&gt;</code>元素中定义的名为<code>java.version</code>的自定义属性的值的方式:</p>

<pre><code class="language-xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.1&lt;/version&gt;
      &lt;configuration&gt;
        &lt;source&gt;${java.version}&lt;/source&gt;
        &lt;target&gt;${java.version}&lt;/target&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>

<h2 id="dependencies">属国</h2>

<p>最后，我们有了<code>&lt;dependencies&gt;</code>元素。这个元素定义了我们的应用程序所依赖的附加库。</p>

<p>依赖关系的细节通常可以通过许多Maven知识库搜索引擎中的一个找到，比如<a href="https://search.maven.org/" rel="nofollow">https://search.maven.org/</a>。下面的屏幕截图显示了对JUnit库的搜索:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image2.png" class="zoom" data-title=""><img src="../Images/859c5538cf986e539713c53b3a63cf5b.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image2.png"/>T2】</a></p>

<p>结果包括具有许多不同GroupIDs的工件，但是我们想要的工件具有<code>GroupID</code>和<code>junit</code>的<code>ArtifactID</code>。结果还告诉我们最新的版本是什么。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image3.png" class="zoom" data-title=""><img src="../Images/bdded97d962b592dc4cfefeeb8788de4.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image3.png"/>T2】</a></p>

<p>点击版本号(上面例子中的4.12链接)会把你带到下面的页面，这个页面提供了可以添加到一个<code>pom.xml</code>文件中的XML，以包含这个依赖项。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image4.png" class="zoom" data-title=""><img src="../Images/5de5221ed94d8e322d342995a9c3d1d7.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image4.png"/>T2】</a></p>

<p>JUnit是一个流行的单元测试库，我们将在编写WebDriver测试时广泛使用它。此外，我们添加了对<code>selenium-java</code>库的依赖，它提供了WebDriver API的实现。</p>

<p>注意<code>&lt;scope&gt;</code>元素被设置为<code>test</code>用于<code>junit</code>依赖关系。这表明这种依赖性只在Maven生命周期的测试阶段需要，在构建发布工件时不会被打包。</p>

<p>我们在这里使用的是JUnit 4，而不是更新的JUnit 5，因为我们将在后面的课程中使用的一些库还没有更新到可以与JUnit 5一起使用。</p>


<pre><code class="language-xml">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;
    &lt;version&gt;${selenium.version}&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;${junit.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<p>将<code>pom.xml</code>文件保存到本地PC上的某个位置。一旦文件被保存，我们可以将它导入IntelliJ，从这里我们将继续编写Java代码。</p>

<p>首次打开IntelliJ时，可以选择从初始对话框中导入项目。单击导入项目链接。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image5.png" class="zoom" data-title=""><img src="../Images/e6e70fbc73a0e0f71f6a179b72c9fb29.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image5.png"/>T2】</a></p>

<p>然后选择<code>pom.xml</code>文件。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image6.png" class="zoom" data-title=""><img src="../Images/dcc4b330edd3226ebad4171f30270d8c.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image6.png"/>T2】</a></p>

<p>IntelliJ识别出pom.xml文件是一个Maven项目，并开始从Maven导入项目。</p>

<p>这个对话框中的默认值是好的，所以点击<code>Next</code>按钮。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image7.png" class="zoom" data-title=""><img src="../Images/3fc9d761ee1717f4988a64216578a977.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image7.png"/>T2】</a></p>

<p>自动检测<code>com.octopus:webdrivertraining:1.0-SNAPSHOT</code>(这是组、工件和版本，或者GAV，工件的表示)项目。</p>

<p>点击<code>Next</code>按钮。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image8.png" class="zoom" data-title=""><img src="../Images/1003fd24aaedbd92fe05a6c0bd37ffd0.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image8.png"/>T2】</a></p>

<p>此对话框允许您选择用于构建项目的JDK。如果您是第一次安装IntelliJ，此列表将为空。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image9.png" class="zoom" data-title=""><img src="../Images/d50158b3546fcee74d6955bb2730a730.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image9.png"/>T2】</a></p>

<p>如果您没有看到Java 1.8 SDK选项，请单击加号图标并从<code>Add New SDK</code>菜单中选择JDK。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image10.png" class="zoom" data-title=""><img src="../Images/ee16b7410b79b1ea04812a3606195ca9.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image10.png"/>T2】</a></p>

<p>选择Java 1.8 JDK的安装目录，点击<code>Open</code>或<code>OK</code>按钮。</p>

<p>在MacOS系统上，Oracle JDK通常位于类似<code>/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home</code>的目录下。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image11.png" class="zoom" data-title=""><img src="../Images/742bfa7d4d1fd2694e0dfd1264015e8b.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image11.png"/>T2】</a></p>

<p>在Windows系统中，你通常会在类似于<code>C:\Program Files\Java\jdk1.8.0_144</code>的目录下找到JDK。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image12.png" class="zoom" data-title=""><img src="../Images/612049ee712688e72fcbc4b8681fc610.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image12.png"/>T2】</a></p>

<p>在像Ubuntu这样的Linux系统上，JDK可以在像<code>/usr/lib/jvm/java-8-openjdk-amd64</code>这样的目录下找到。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image13.png" class="zoom" data-title=""><img src="../Images/28e46c92241e7c51b3dafb5569ca552d.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image13.png"/>T2】</a></p>

<p>这将把JDK添加到列表中。点击<code>Next</code>按钮。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image14.png" class="zoom" data-title=""><img src="../Images/f1bf15087f59d6b938db1d11dcac86d1.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image14.png"/>T2】</a></p>

<p>IntelliJ项目的默认名称与Maven ArtifactID相同。这是默认设置，所以点击<code>Finish</code>按钮。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image15.png" class="zoom" data-title=""><img src="../Images/8db9de1744bdbd8a8b4cf9962851c228.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image15.png"/>T2】</a></p>

<p>然后IntelliJ创建一个链接到Maven项目的空项目。</p>

<p>在ide的右边你会看到一个叫做<code>Maven Projects</code>的按钮。如果看不到这个按钮，可以通过点击<span class="path">查看➜工具窗口➜ Maven项目</span>打开窗口。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image16.png" class="zoom" data-title=""><img src="../Images/1070045cec4d7a32d3bc77c4073f2ed2.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image16.png"/>T2】</a></p>

<p>使用<code>View</code>菜单或按钮打开该菜单，将显示<code>Maven Projects</code>窗口。在<code>Lifecycle</code>菜单项下，您可以看到构成默认生命周期的Maven阶段。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image17.png" class="zoom" data-title=""><img src="../Images/8cb195672d08c4e591cda63112c72184.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image17.png"/>T2】</a></p>

<p>双击阶段用Maven执行它们。这里我们已经执行了<code>package</code>阶段。这在目前不会取得很大的成就，因为我们没有要编译或打包的代码，但是操作成功的事实(我们可以从输出中的<code>BUILD SUCCESS</code>消息中看到)意味着我们有一个有效的<code>pom.xml</code>文件。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image18.png" class="zoom" data-title=""><img src="../Images/fde8023ffb8e534eadb7f55e86deaf28.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image18.png"/>T2】</a></p>

<p>在我们结束这篇文章之前，我想演示一下设置<code>project.build.sourceEncoding</code>属性的效果。从<code>pom.xml</code>文件中注释掉这一行并保存修改。</p>

<p>IntelliJ将检测到文件已被修改，并为您提供自动导入任何未来更改的选项。这通常是个好主意，所以单击通知弹出窗口中的<code>Enable Auto-Import</code>链接。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image19.png" class="zoom" data-title=""><img src="../Images/699c7bd6ed11bb2da7729d1cc4e5f6f2.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image19.png"/>T2】</a></p>

<p>从<code>Maven Projects</code>工具窗口再次双击封装阶段。</p>

<p>请注意，当没有设置<code>project.build.sourceEncoding</code>属性时，在构建项目时，Maven会显示以下警告:</p>

<pre><code>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
</code></pre>

<p>恢复变更并再次打包项目，您会注意到警告消失了。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image20.png" class="zoom" data-title=""><img src="../Images/211fe774c4f40137a2dca53db3e5ae4d.png" class="img-fluid center" alt="" data-original-src="https://i.octopus.com/blog/2018-10/selenium/2-the-maven-pom-file/image20.png"/>T2】</a></p>

<p>这样我们就有了一个导入IntelliJ的最小Maven项目。在下一篇文章中，我们将开始编写一些Java来实现我们的第一个WebDriver测试。</p>

<p>这篇文章是关于<a href="/blog/selenium/0-toc/webdriver-toc">创建Selenium WebDriver测试框架</a>的系列文章的一部分。</p>

                    
                    
</body>
</html>