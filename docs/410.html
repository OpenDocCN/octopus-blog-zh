<html>
<head>
<title>Managing credentials in Jenkins - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Jenkins - Octopus部署中管理凭据</h1>
<blockquote>原文：<a href="https://octopus.com/blog/managing-jenkins-credentials#2022-05-19">https://octopus.com/blog/managing-jenkins-credentials#2022-05-19</a></blockquote>
                        <p>像八达通一样，詹金斯只是你管道中的一步，补充其他系统和服务。</p>

<p>您可以将Jenkins连接到大多数行业工具，安全地存储他们的凭证、秘密和API密钥。通过存储这些登录方法，Jenkins可以在自动化过程中无缝连接到其他服务。</p>

<p>Jenkins的文档推荐使用<a href="https://plugins.jenkins.io/credentials-binding/" rel="nofollow">凭证绑定插件</a>。这是Jenkins安装过程中安装者推荐的插件之一，所以可能你已经安装了它(并使用了它)而没有意识到。</p>

<p>在这篇文章中，我将带你了解如何安装这个插件以及它的不同用法。</p>

<h2 id="how-to-install-the-credentials-binding-plugin">如何安装凭证绑定插件</h2>

<p>如果您没有安装凭证绑定插件，很容易添加:</p>

<ol>
<li>从菜单中点击<strong>管理詹金斯</strong>。</li>
<li>点击<strong>管理插件</strong>。</li>
<li>点击<strong>可用的</strong>选项卡，开始在<strong>过滤器</strong>字段中输入<code>Credentials Binding</code>。插件应该出现在预测的搜索结果中。</li>
<li>勾选插件左侧的复选框，然后点击<strong>安装而不重启</strong>。</li>
</ol>

<p>Jenkins安装插件和所有依赖项，包括其他插件和扩展。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2022-01/managing-jenkins-credentials/install-credentials-binding-plugin.png" class="zoom" data-title=""><img src="../Images/c8f393b029727b16fb31617f39fee4fb.png" class="img-fluid center" alt="The Manage Plugin screen with the " credentials="" binding="" plugin="" found="" in="" the="" store="" and="" ready="" to="" install="" data-original-src="https://i.octopus.com/blog/2022-01/managing-jenkins-credentials/install-credentials-binding-plugin.png"/>T2】</a></p>

<p>凭证绑定插件以两种不同的方式存储您的身份验证方法:</p>



<p>我们来看看区别。</p>

<h2 id="global-credentials">全局凭据</h2>

<p>全局凭据是手动输入的登录方法，存储在Jenkins中。任何具有访问权限的人都可以使用凭据连接到其他服务。这些可以包括:</p>

<ul>
<li>代码回购，如GitHub或BitBucket</li>
<li>打包服务，比如Docker注册表或TeamCity feed</li>
<li>部署工具，如Octopus</li>
</ul>

<h3 id="how-to-add-credentials-in-jenkins">如何在Jenkins中添加凭证</h3>

<p>要在Jenkins中添加凭据:</p>

<ol>
<li>从菜单中点击<strong>管理詹金斯</strong>。</li>
<li>向下滚动到<strong>安全</strong>标题，点击<strong>管理凭证</strong>。</li>
<li>点击詹金斯标题下<strong>商店范围内的<strong>詹金斯</strong>。</strong></li>
<li>点击<strong>系统</strong>标题下的<strong>全球凭证(无限制)</strong>。</li>
<li>如果没有凭证，可以点击<strong>添加一些凭证怎么样？</strong>链接，否则点击左边的<strong>添加凭证</strong>。</li>
<li>从<strong>种类</strong>字段的下拉框中选择您想要存储的凭证类型，填写字段并点击<strong>确定</strong>。您可以添加以下类型的凭据:          <ul>
<li>用户名和密码</li>
<li>SSH用户名和私钥</li>
<li>秘密文件</li>
<li>秘密文本</li>
<li>证书</li>
</ul>
</li>
</ol>

<p>无论您选择哪个选项，都要输入有意义的<strong> ID </strong>和<strong>描述</strong>。</p>

<h3 id="using-global-credentials-in-jenkins">在Jenkins中使用全局凭据</h3>

<p>添加凭证后，可以调用它们连接到管道中的其他工具，无论是通过UI、插件还是Jenkinsfile。</p>

<p>可以选择全局凭据的一个很好的例子是在创建管道时:</p>

<ol>
<li>点击左侧菜单中的<strong>新项目</strong>。</li>
<li>输入项目名称，选择<strong>自由式项目</strong>，点击<strong>确定</strong>。</li>
<li>检查<strong>源代码管理</strong>标题下的Git单选按钮。将您的回购地址粘贴到<strong>存储库URL </strong>字段，并从<strong>凭证</strong>下拉框中选择您的凭证。</li>
<li>设置好你的物品后点击<strong>保存</strong>。</li>
</ol>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2022-01/managing-jenkins-credentials/freestyle-project-setup.png" class="zoom" data-title=""><img src="../Images/50dab1ec5cbc5fd5baa166a97e4987f3.png" class="img-fluid center" alt="The Jenkins freestyle project setup screen showing an example of where you can select global credentials" data-original-src="https://i.octopus.com/blog/2022-01/managing-jenkins-credentials/freestyle-project-setup.png"/>T2】</a></p>

<p>Jenkinsfiles是代码库中的文本文件，它定义了管道做什么以及它连接到什么。Jenkinsfiles是Jenkins Pipeline的一部分——Jenkins推荐的用于持续集成和持续交付(CI/CD)的插件的集合。</p>
<p>这意味着您可以通过Jenkinsfile从存储在Jenkins中的凭据连接到服务。</p>
<p>如果您使用的是Blue Ocean插件，它会在您建立管道时为您创建一个Jenkinsfile，那么您可能根本不需要使用Jenkins file。</p>
<p>更多信息请参见Jenkins网站上的<a href="https://www.jenkins.io/doc/book/pipeline/jenkinsfile/" class="alert-link" rel="nofollow">使用Jenkinsfile页面</a>。</p>


<h2 id="user-tied-credentials">Jenkins中的用户绑定凭据</h2>

<p>根据您将Jenkins连接到的设备或您使用的插件，Jenkins将一些凭证与登录的用户联系起来。Jenkins只在您第一次将它与另一个服务连接时存储这些凭据。您不能在初始设置之外使用这些凭据，其他用户帐户也不能访问它们。</p>

<p>例如，当在<a href="https://plugins.jenkins.io/blueocean/" rel="nofollow">蓝海</a>(一个简化Jenkins用户界面的插件)中创建你的第一个管道时，Jenkins连接到你的代码库。如果连接到GitHub，您使用GitHub个人访问令牌(在您的GitHub帐户的开发者设置中创建)来允许Jenkins连接到repo。Jenkins只将登录用户的令牌存储在他们自己的凭据“域”中。</p>

<p>在Jenkins中，您可以在不同于全局凭证的位置找到这些凭证，尽管它们的屏幕工作方式类似。</p>

<p>要查看您的用户绑定凭证，请单击顶部菜单中您用户名旁边的箭头，然后单击<strong>凭证</strong>。</p>

<p>顶部显示您有权访问的所有凭据，包括用户和全局。向下滚动时，您会看到所有凭据存储的标题。在我的例子中，范围为用户:Andy 的<strong>商店是只有我可以使用的凭证。</strong></p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2022-01/managing-jenkins-credentials/user-tied-credentials.png" class="zoom" data-title=""><img src="../Images/e846faff07e962c0fdb5b3b255b8e6c1.png" class="img-fluid center" alt="An example of user-tied credentials in Jenkins" data-original-src="https://i.octopus.com/blog/2022-01/managing-jenkins-credentials/user-tied-credentials.png"/>T2】</a></p>

<h2 id="whats-next">下一步是什么？</h2>

<p>更多信息参见<a href="https://www.jenkins.io/doc/book/using/using-credentials/" rel="nofollow"> Jenkins的证书文档</a>。</p>

<p>查看我们关于配置Jenkins的其他帖子:</p>



<p><a href="https://oc.to/JenkinsPipelineGenerator" rel="nofollow">试试我们免费的Jenkins管道生成器工具</a>用Groovy语法创建一个管道文件。这是您启动管道项目所需的一切。</p>

<h2 id="watch-our-jenkins-pipeline-webinar">观看我们的詹金斯管道网络研讨会</h2>

<iframe src="https://www.youtube.com/embed/D_7AHTML_xw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">VIDEO</iframe>

<p>我们定期举办网络研讨会。请参见<a href="https://octopus.com/events">网络研讨会第</a>页，了解有关即将举办的活动和实时流录制的详细信息。</p>

<p>阅读我们的<a href="https://octopus.com/blog/tag/CI%20Series">持续集成系列</a>的其余部分。</p>

<p>愉快的部署！</p>

                    
                    
</body>
</html>