<html>
<head>
<title>Announcing Linux worker pools on Octopus Cloud - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Octopus Cloud上宣布Linux工人池- Octopus Deploy</h1>
<blockquote>原文：<a href="https://octopus.com/blog/octopus-cloud-built-in-linux-worker-pools#2022-08-10">https://octopus.com/blog/octopus-cloud-built-in-linux-worker-pools#2022-08-10</a></blockquote>
                        <p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/octopus-linux-workers.png" class="zoom" data-title=""><img src="../Images/cdb0f1d456a91c1cf6e9fe060067bbe5.png" class="img-fluid center" alt="Announcing Linux worker pools on Octopus Cloud" data-original-src="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/octopus-linux-workers.png"/>T2】</a></p>

<p>有了Octopus托管的<a href="https://octopus.com/docs/infrastructure/workers/dynamic-worker-pools">动态工作池</a>，你可以在几分钟内启动<a href="https://octopus.com/docs/octopus-cloud"> Octopus Cloud </a>实例并在Windows机器上运行PowerShell部署或runbook步骤。不幸的是，在Linux机器上运行bash脚本并不总是那么容易。</p>

<p>章鱼云对Linux工作者的支持不足，让我们从上线开始就有点难过。您已经能够添加自己的Linux工作器，但是感觉不如为Windows提供的对动态工作器的内置支持那样自然。</p>

<h2 id="ubuntu-18.04-workers-now-available">Ubuntu 18.04工作程序现已推出</h2>

<p>从今天起，我很高兴地宣布我们支持章鱼云上的Ubuntu工人。这是我们在成为Windows工作负载和Linux工作负载最佳部署工具的征途上向前迈出的一步。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/images/worker-pool-configuration.png" class="zoom" data-title=""><img src="../Images/af3db501befb2bde32890dcf8a7501cc.png" class="img-fluid center" alt="Worker Pool Configuration with Ubuntu 18.04 selected" data-original-src="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/images/worker-pool-configuration.png"/>T2】</a></p>

<h2 id="windows-2019-workers-now-available">Windows 2019工作人员现已推出</h2>

<p>我也很高兴分享，我们已经推出了Windows 2019 workers。我们仍在切换每个人，但您可以通过导航到<strong> <span class="path">基础架构➜工作池</span> </strong>来选择在您的实例中使用新的工作映像。</p>

<h2 id="docker-now-pre-installed">Docker现已预装</h2>

<p>切换到Windows 2019 workers的一个很大的积极因素是docker也安装了，所以你可以用你自己的自定义Docker图像让你的构建闪闪发光；唯一的限制是你的想象力(哦，还有DockerHub下载时间)。</p>

<p>我们真正感到兴奋的一件事是，增加对Docker的支持真正开放了我们的<a href="https://octopus.com/blog/execution-containers">执行容器特性</a>，它已经在特性标志后面有一段时间了。作为我们早期访问计划的一部分，现在每个人都可以使用该功能。</p>



<p>最后一件事，我们的<a href="https://hub.docker.com/r/octopusdeploy/worker-tools" rel="nofollow">工人工具容器</a>也已经更新，现在支持刚刚发布的<a href="https://www.hashicorp.com/blog/announcing-hashicorp-terraform-0-13/" rel="nofollow"> Terraform 0.13 </a>版本。查看<a href="https://github.com/OctopusDeploy/WorkerTools/pull/20" rel="nofollow"> PR #20 </a>了解所有可用版本的详细信息。</p>

<h2 id="walk-though">尽管走</h2>

<p>下一节将介绍如何在Linux worker上运行bash脚本。作为补充，我们将从容器内部执行Terraform，以展示使用最新版本是多么容易。</p>

<h3 id="configure-an-external-feed-for-dockerhub">为DockerHub配置外部提要</h3>

<p>如果您还没有为DockerHub配置提要，请转到<strong> <span class="path">库➜外部提要</span> </strong>并点击<strong>添加提要</strong>按钮。在<strong> Feed Type </strong>字段中选择<strong>Docker Container Registry</strong>，并为其命名，我称之为mine <strong> Docker Hub </strong>。</p>

<h3 id="create-a-new-runbook">创建新的runbook</h3>

<p>创建新的员工库后，转到“项目”选项卡，创建一个新项目。从那里，转到<strong> Runbooks </strong>并点击<strong> Add Runbook </strong>按钮并给它命名。</p>

<p>在process选项卡上，添加一个新的<strong>运行脚本</strong>步骤。在worker 上选择<strong> Run once将让您选择新的worker pool，并显示一个名为<strong>容器映像</strong>的新部分。</strong></p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/images/runbook-step-worker-pool-container.png" class="zoom" data-title=""> T31 </a></p>

<p>选择Docker Hub feed，然后点击底部的<code>Use latest Linux-based image</code>链接。这将自动使用最新版本填充该字段。</p>

<p>最后，对于脚本，选择<strong> Bash </strong>并输入以下脚本:</p>

<pre><code class="language-bash">cat &lt;&lt;EOT &gt; main.tf
resource "null_resource" "example1" {
  provisioner "local-exec" {
    command = "echo 'hello'"
  }
}
EOT

echo "-----terraform init-----"
terraform init -no-color

echo "-----terraform apply-----"
terraform apply -no-color -auto-approve
</code></pre>

<p>点击<strong>保存</strong>，然后<strong>运行</strong>将执行脚本:</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/images/terraform-run-log.png" class="zoom" data-title=""><img src="../Images/cfe36f3720566bba1a2a12ab1ab4590f.png" class="img-fluid center" alt="Runbook execution log" data-original-src="https://i.octopus.com/blog/2020-09/octopus-cloud-built-in-linux-worker-pools/images/terraform-run-log.png"/>T2】</a></p>

<p>虽然这个脚本并没有做多少事情(它<code>echo</code>发出了“hello”)，但是它强调了运行bash脚本和使用最新的Terraform版本是多么容易。</p>

<h2 id="conclusion">结论</h2>

<p>我们希望您和我们一样对这些新功能感到兴奋。今天就给它一个狂欢吧(一语双关),让我们知道你的想法！</p>

<p>愉快的部署！</p>

                    
                    
</body>
</html>