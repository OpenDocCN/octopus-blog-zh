<html>
<head>
<title>Tracking your work from code to deployment - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>从代码到部署跟踪您的工作- Octopus Deploy</h1>
<blockquote>原文：<a href="https://octopus.com/blog/metadata-and-work-items#2021-07-07">https://octopus.com/blog/metadata-and-work-items#2021-07-07</a></blockquote>
                        <p>在本帖中，我们很高兴地宣布Octopus Deploy 2019.4中的一些新功能，这些功能专注于收紧您的CI/CD渠道中的反馈循环。这些特性通过传递更多关于构建的信息，加强了构建服务器和Octopus之间的集成。</p>

<p>八达通2019.4包括:</p>

<ul>
<li>构建信息和工作项跟踪</li>
<li>发行说明模板和发行说明自动生成</li>
<li>八达通与吉拉整合</li>
</ul>

<p>我们将在另一篇文章中介绍<a href="/blog/release-notes-templates">发行说明模板</a>，现在让我们来看看其余的特性。</p>

<h2 id="build-information-and-work-item-tracking">构建信息和工作项跟踪</h2>

<p>构建软件的固有思想是，随着时间的推移，产品是已经构建、发布和部署的特性、问题和错误的积累。</p>

<p>接下来，我们希望跟踪软件的每个版本中添加了哪些特性、问题和缺陷，以及哪些正在部署。我们使用广义的术语<strong>工作项</strong>来指代一个特性、问题或者bug。换句话说，Octopus可以跟踪从代码到构建到部署的工作项目，这可以更深入地了解软件的任何给定版本中包含的内容。</p>

<p>在发行版之间交流变更的最常见方式是使用发行说明，工作项的引入并没有改变Octopus处理发行说明的方式，但是我们添加了构建信息和工作项作为单独的附加信息。我们所做的一个改变是部署现在也有了发布说明，或者更确切地说，我们称之为<strong>发布变更</strong>。这些是根据部署中的版本自动收集的，因此您不需要手动输入它们。</p>

<p>“等等，”我听到你说。“在部署中释放<strong> s </strong>？难道我们不部署<strong>一个</strong>版本吗？”是的，但是请记住，构建软件是一个累积的过程，因此我们部署的是自上次部署到该环境/租户以来发生的所有版本的集合。</p>

<p>好了，这有点拗口，让我们来看一个例子。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-04/metadata-and-work-items/accumulation.png" class="zoom" data-title=""><img src="../Images/673fa8a8e78fff778a703a197d5eec2b.png" class="img-fluid center" alt="Work item accumulation" data-original-src="https://i.octopus.com/blog/2019-04/metadata-and-work-items/accumulation.png"/>T2】</a></p>

<p>此图描述了随着时间的推移而发生的多个发布和部署，以及每个部署的工作项详细信息。在这个场景中，每个版本都被立即部署到开发环境中，这是最简单的情况，因为只涉及到一个版本。</p>

<p><code>1.0.3</code>的部署展示了一个更复杂的工作项汇总。当<code>1.0.3</code>被部署到登台环境中时，它包含了来自版本<code>1.0.2</code>和<code>1.0.3</code>的工作项。类似地，当它被部署到Prod环境中时，它也包含了来自<code>1.0.1</code>的工作项。</p>

<h2 id="how-does-it-work">它是如何工作的？</h2>

<p>为了完成这项工作，我们更新了构建服务器插件，增加了一个新的<code>Octopus Metadata</code>步骤。这一步收集关于构建和提交的元数据，并将所有这些包含在对Octopus的调用中。这类似于推送包，需要元数据描述的包的packageID和版本。</p>

<p>这个包本身不一定是你推给八达通的。这是一个重要的部分，Octopus正在接收给定packageID和版本的元数据，并存储这些元数据以供创建发布和部署时使用。包本身可以是任何格式，来自任何提要，包括来自容器库中的容器图像。</p>

<p>元数据包括指向创建包的版本的链接，以及包中包含的任何工作项。</p>

<p>对于确实被推送到Octopus的包，当您在库中查看它们时，您将会看到元数据。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-04/metadata-and-work-items/package-detail.png" class="zoom" data-title=""><img src="../Images/d8dd5b8a8d720d900d55720fe73bb442.png" class="img-fluid center" alt="Package details metadata" data-original-src="https://i.octopus.com/blog/2019-04/metadata-and-work-items/package-detail.png"/>T2】</a></p>

<p>此元数据也会出现在“发布”、“部署预览”和“任务”页面上。对于来自外部提要的包，发布是在Octopus门户中看到包的元数据的第一个点。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-04/metadata-and-work-items/release-work-items.png" class="zoom" data-title=""><img src="../Images/79e86c706f41d16d9b226b6a51ed12b5.png" class="img-fluid center" alt="Release metadata" data-original-src="https://i.octopus.com/blog/2019-04/metadata-and-work-items/release-work-items.png"/>T2】</a></p>

<h2 id="deployment-variables">部署变量</h2>

<p>正如我们上面提到的，部署已经扩展到包括“发布变更”重要的一点是<strong>部署总是将来自</strong>版本的发布说明聚集到发布变更中，即使没有元数据和工作项。</p>

<p>我们将在另一篇文章中对此进行更多讨论。</p>

<h2 id="deploy-a-release-step">部署发布步骤</h2>

<p>什么时候包裹不是包裹？当它是一个<em>中的子项目时，部署一个发布</em>步骤。这种情况也包括在内。元数据和工作项不仅会在子项目的发布/部署中进行计算，而且还会在“父”项目的发布/部署中进行汇总。</p>

<h2 id="build-servers">构建服务器</h2>

<p>在最初的版本中，我们的Bamboo和TeamCity插件已经更新，包含了新的元数据步骤。</p>

<p>我们仍在为Azure DevOps插件更新，应该很快就可以使用。</p>

<p>詹金斯的支持也将到来，但我们现在没有一个时间表。</p>

<h2 id="jira">吉拉</h2>

<p>到目前为止，我们谈论的一切都是以服务器和Octopus为中心构建的，这对任何使用Octopus的人都适用。让我们看看如果你使用托管吉拉你还能得到什么。</p>

<p>Octopus中新的吉拉问题跟踪器扩展与吉拉的<a href="https://confluence.atlassian.com/bamboo/viewing-bamboo-activity-in-jira-applications-399377384.html" rel="nofollow">部署仪表板</a>功能相结合，因此您可以获得部署反馈，就像使用BitBucket管道一样。</p>

<p>当您在Octopus中进行部署时，它会将信息实时反馈给吉拉，您将看到部署出现在吉拉。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2019-04/metadata-and-work-items/jira-deployment.png" class="zoom" data-title=""><img src="../Images/1ef7093c989e09e16aeb1a016486cb3c.png" class="img-fluid center" alt="Jira Deployments" data-original-src="https://i.octopus.com/blog/2019-04/metadata-and-work-items/jira-deployment.png"/>T2】</a></p>

<p>吉拉集成特性的一个子集也可用于那些具有本地实例的用户，请参见我们的<a href="https://g.octopushq.com/JiraIssueTracker" rel="nofollow">文档</a>了解更多详细信息。</p>

<h2 id="wrap-up">包裹</h2>

<p>CI/CD管道中主要部分之间更紧密的集成有助于简化信息流。这些与吉拉的新集成特性就是一个很好的例子，所以如果你正在使用吉拉和八达通，现在是时候集成了！</p>

                    
                    
</body>
</html>