<html>
<head>
<title>Encrypting connection strings in Web.config - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>加密Web.config中的连接字符串- Octopus Deploy</h1>
<blockquote>原文：<a href="https://octopus.com/blog/encrypting-connection-strings#2015-09-25">https://octopus.com/blog/encrypting-connection-strings#2015-09-25</a></blockquote>
                        <p>当指定连接字符串时，通常最好使用Windows身份验证，因为您不需要将密码放在Web.config文件中。然而，这并不是在每种情况下都有效，所以如果你必须在你的连接字符串中使用密码，那么<a href="http://hugoware.net/blog/dude-for-real-encrypt-your-web-config">最好加密它</a>。Step模板是增强Octopus Deploy本机功能的一个很好的方法。因此，为了使加密连接字符串部分更容易，我创建了一个新模板来完成这项工作。</p>

<p>可以抢新的<a href="https://library.octopusdeploy.com/#!/step-template/actiontemplate-iis-website-encrypt-web.config-section"> IIS网站——加密网页。Octopus部署库中的配置连接字符串</a>。在幕后，该模板使用了<code>aspnet_regiis</code>工具来加密Web.Config。将该步骤添加到您的部署流程将会带您进入配置的步骤详细信息页面。</p>

<p><img src="../Images/aad6c2e37f6872c44c448372cee8f06c.png" alt="Configure Encrypt Connection Strings" data-original-src="https://i.octopus.com/blog/migrated/Configure-Encrypt-Connection-Strings_ykseyo.png"/></p>

<p>这个模板有一个名为Website directory的参数，通常在包部署步骤中设置为<code>InstallationDirectoryPath</code>。请注意，您必须将包部署步骤的名称指定为变量的一部分。</p>

<pre><code>#{Octopus.Action[MyDeployPackageStep].Output.InstallationDirectoryPath}
</code></pre>

<p>此步骤设计为在将包部署到web服务器后运行。不幸的是，这意味着如果您使用<code>IIS web site and application pool</code>特性，会有一个微小的窗口，其中Web.config不会被加密。为了绝对安全，最好在将IIS重新打印到新网站之前应用加密。要解决此问题，请关闭该功能并使用自定义PowerShell脚本来更新IIS。</p>

<p>将该步骤添加到部署过程之后，您的下一个部署将有一个精心加密的连接字符串部分。</p>

                    
                    
</body>
</html>