<html>
<head>
<title>Getting started with Bamboo - Octopus Deploy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Bamboo - Octopus部署入门</h1>
<blockquote>原文：<a href="https://octopus.com/blog/getting-started-with-bamboo#2022-12-20">https://octopus.com/blog/getting-started-with-bamboo#2022-12-20</a></blockquote>
                        <p>持续集成(CI)服务器是CI/CD流程的重要组成部分。CI服务器获取一个代码存储库，构建它，并将其推到一个中心位置，在那里像Octopus这样的连续交付(CD)工具可以接管和管理部署。</p>

<p>Bamboo是由Atlassian开发的CI服务器，可以自动构建和测试软件应用程序。如果您正在开始您的CI/CD之旅，从一个简单的用例开始，并有一个可见的结果，会很有帮助。</p>

<p>在本文中，我将向您展示如何构建和推送一个软件构件，Octopus可以接管它并将其部署到目标环境中。</p>

<p>您将学习如何:</p>

<ul>
<li>在Windows服务器上安装Bamboo</li>
<li>配置Bamboo项目</li>
<li>配置一个Bamboo计划来构建Docker容器并将其推送到容器注册中心</li>
<li>运行并查看容器图像</li>
</ul>

<h2 id="getting-set-up">正在设置</h2>

<p>要关注这篇文章，您需要以下软件和帐户:</p>



<h2 id="installing-bamboo-on-a-windows-server">在Windows服务器上安装Bamboo</h2>

<p>要安装Bamboo:</p>

<ul>
<li>注册一个免费试用版，它会给你一个激活密钥</li>
<li>运行安装可执行文件</li>
<li>将安装位置设置为您可以访问的目录，例如<code>C:\Users\Username\Documents</code>(注意，将其设置为C:\Program files的默认位置可能会导致权限错误)</li>
<li>设置Bamboo主目录，并确保这是一个独立于安装位置的目录，文件夹名为<code>Bamboo-home</code></li>
</ul>

<p>安装完成后，运行Bamboo服务器:</p>

<ul>
<li>打开终端并导航到Bamboo安装目录</li>
<li>运行<code>bin\start-bamboo.bat</code></li>
<li>服务器应该在<code>http://localhost:8085/</code>启动</li>
</ul>

<h2 id="setting-up-users">设置用户</h2>

<p>在启动屏幕中，会要求您设置一个管理员帐户。填写详细信息并将详细信息存储在密码管理器中。如果你把密码放错了地方，你需要运行一个恢复过程。</p>

<h2 id="agents">代理人</h2>

<p>代理是在Bamboo中执行工作负载的工人。因为您安装了先决条件技术，所以您可以使用本地机器作为代理进行测试。</p>

<p>要设置本地代理:</p>

<ul>
<li>在Bamboo仪表板中，转到设置图标并选择<strong>代理</strong></li>
<li>转到<strong>添加本地代理</strong>并为其命名</li>
<li>点击<strong>添加</strong></li>
</ul>

<h2 id="setting-up-the-project-and-plan">设置项目和计划</h2>

<p>Bamboo将您的工作流程组织成项目和计划。一个项目可以包含多个计划，每个计划是一个执行一系列任务的过程。</p>

<p>首先，设置您的第一个项目和计划:</p>

<ul>
<li>在主菜单中，选择<strong>创建</strong>，然后选择<strong>创建计划</strong></li>
<li>填写您的项目和计划的名称</li>
</ul>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2023-01/getting-started-with-bamboo/create-project-and-plan.png" class="zoom" data-title=""><img src="../Images/d4aecc4f599cd2c700aeaea9f4e3adf7.png" class="img-fluid center" alt="Create Project and Plan in Bamboo" data-original-src="https://i.octopus.com/blog/2023-01/getting-started-with-bamboo/create-project-and-plan.png"/>T2】</a></p>

<p>在下一个屏幕上，选中显示<strong> Link new repository </strong>的框。</p>

<h3 id="connect-to-the-octopus-underwater-app-repository">连接到章鱼水下应用程序库</h3>

<p>本帖使用<a href="https://github.com/OctopusSamples/octopus-underwater-app" rel="nofollow">章鱼水下app </a>。</p>

<p>要使用此存储库:</p>

<ul>
<li>把它存入你自己的GitHub账户</li>
<li>在GitHub的密码设置中，使用一个<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" rel="nofollow">个人访问令牌</a>来授权Bamboo访问你的GitHub账户下的存储库</li>
<li>选择主分支</li>
<li>测试连接以确保Bamboo连接到这个存储库</li>
<li>点击<strong>保存并继续</strong></li>
</ul>

<h3 id="configuring-the-job">配置作业</h3>

<p>在<strong>配置作业</strong>屏幕上，配置计划为执行您的作业而运行的任务。Bamboo提供了一套任务步骤供您选择。这些任务执行CI路径中的某个步骤，如检出、构建、拉取、推送。</p>

<p>有一个为您预先填写的源代码签出任务。这将链接的GitHub存储库签出到Bamboo中。</p>

<ul>
<li>将隔离的构建作为<strong>代理环境</strong>。这将使用您之前设置的本地代理。</li>
</ul>

<p>首先，添加构建Docker任务:</p>

<ul>
<li>点击<strong>添加任务</strong>并搜索<code>Docker</code></li>
<li>将命令设置为<code>Build a Docker Image</code></li>
<li>将存储库设置为<code>[Your DockerHub Username]/[The tag of your image]</code></li>
<li>检查<strong>使用位于上下文路径</strong>中的现有docker文件</li>
<li>点击<strong>保存</strong></li>
</ul>

<p>现在，添加Push Docker任务:</p>

<ul>
<li>点击<strong>添加任务</strong>并搜索<code>Docker</code></li>
<li>将命令设置为<code>Push a Docker Image</code></li>
<li>将存储库设置为<code>[Your DockerHub Username]/[The tag of your image]</code></li>
<li>检查<strong>使用代理的本地凭证</strong></li>
<li>点击<strong>保存</strong></li>
<li>点击<strong>创建</strong></li>
</ul>

<p>该计划通过检出代码、构建Docker映像并将构建的映像推送到DockerHub开始执行</p>

<p>完成后，您会看到一个绿色的勾号框，表示计划成功完成。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2023-01/getting-started-with-bamboo/underwaterapp-success.png" class="zoom" data-title=""><img src="../Images/7eb59e3ce4c757576e1955857207dba4.png" class="img-fluid center" alt="Bamboo Success" data-original-src="https://i.octopus.com/blog/2023-01/getting-started-with-bamboo/underwaterapp-success.png"/>【T37】T2】</a></p>

<p>导航到您的DockerHub帐户，确认图像已被推送到存储库。</p>

<h2 id="deploy-step">部署步骤</h2>

<p>现在映像在DockerHub上，任何CD工具都可以将它部署到本地或云平台。我们有指南解释如何为以下人员完成此操作:</p>



<p>要在本地查看应用程序:</p>

<ul>
<li><code>docker pull [Your DockerHub Username]/[The tag of your image]</code></li>
<li><code>docker run -p 8080:8080 [Your DockerHub Username]/[The tag of your image]</code></li>
<li>去<code>http://localhost:8080/</code></li>
</ul>

<p>你看到章鱼水下应用程序，你可以了解更多关于CI/CD和章鱼的信息。</p>

<p><a href="#" data-featherlight="https://i.octopus.com/blog/2023-01/getting-started-with-bamboo/octopus-underwater-app.png" class="zoom" data-title=""><img src="../Images/f433a42a6fbc599f7e5c14e853823852.png" class="img-fluid center" alt="Octopus Underwater App" data-original-src="https://i.octopus.com/blog/2023-01/getting-started-with-bamboo/octopus-underwater-app.png"/>T2】</a></p>

<h2 id="conclusion">结论</h2>

<p>CI服务器是CI/CD流程的重要组成部分，您可以使用许多不同的CI服务器和Octopus Deploy来完成您的部署。Atlassian的Bamboo允许您构建Docker映像并将其推送到Docker存储库。</p>

<p>在这篇文章中，你学习了如何安装Bamboo和建立一个项目，并计划构建和推送Octopus水下应用程序。这是一个简单的入门示例，但使用竹子的方式还有很多。</p>

<p>如果您对更多CI服务器资源感兴趣，请查看我们关于CI服务器的<a href="https://octopus.com/blog/tag/CI%20Series">系列</a>，其中我们重点介绍了Jenkins、GitHub操作和基本CI概念。</p>

<p>愉快的部署！</p>

                    
                    
</body>
</html>