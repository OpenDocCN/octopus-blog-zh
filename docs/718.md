# 配置文件格式的状态:XML 与 YAML、JSON 与 HCL - Octopus Deploy

> 原文：<https://octopus.com/blog/state-of-config-file-formats>

[![The state of config file formats: XML vs. YAML vs. JSON vs. HCL](img/75e8299e2859f313ef680a93d09c441a.png)](#)

每个应用程序、环境或系统都需要某种级别的配置。配置格式，比如基于纯文本文件的`ini`格式，这些年来在流行程度上有所波动。随着应用程序和系统需求的发展，所需的配置复杂性和结构也在发展。

如今，存在许多配置格式，但有些格式在云环境中更受欢迎。XML、JSON、YAML 和 HCL 支持复杂的配置，它们各有优缺点。

在第一批结构化配置语言中，XML 是在 1998 年 W3C 的 1.0 版规范中引入的。XML 是为通用和简单而设计的，它支持许多传输语言、服务和配置格式。

尽管 XML 无处不在，但更新的配置语言正在取代 XML 的主导地位。尽管如此，在许多情况下，XML 的结构化特性及其灵活性最适合复杂的配置。

JSON 等简单的配置语言适用于许多应用程序，但是当您需要适当的验证、模式和名称空间支持时，XML 通常是最好的。

### XML 的优势

*   XML 是一种通用语言，它可以很容易地从一个公共语法中实现不同的格式。
*   模式是为自定义类型的验证和创建而存在的，而命名空间可以避免元素之间的冲突。
*   XPath 和 XQuery 简化了对 XML 文档的复杂查询。

### XML 的缺点

*   XML 语言很冗长，通常包含冗余的语法。
*   更高的详细程度会增加存储容量和带宽需求。
*   由于元素的描述性，不容易被人理解。

JSON 在 2013 年被认可为正式规范，自 21 世纪初就已经存在。它在许多不同的应用程序中使用，强调可读性和简单的语法。

JSON 源自 JavaScript，是独立于语言的。JSON 解析器适用于许多不同的编程语言和工具。

JSON 是 XML 更简单的替代方案。凭借简洁易用的语法，JSON 接管了许多配置设置。开发人员欣赏 JSON 提供的简单性和处理速度。

JSON 是当今使用最普遍的语言之一，尽管它的设计存在固有的缺点，但仍然很受欢迎。

### Advantages of JSON

*   与 XML 相比，由于语法更紧凑，因此更易于阅读。
*   有限标记的简单语法。
*   快速系统和语言解析。
*   JSONPath 和 XPath 一样，可用于复杂的查询。

### JSON 的缺点

*   有限的数据类型支持，仅包含*字符串、数字、JSON 对象、数组、布尔值和空值*。
*   没有名称空间、注释或属性支持。
*   简单的结构可能不支持复杂的配置。

最初作为另一种标记语言而为人所知，官方定义改为表达数据焦点而不是文档焦点。YAML 创建于 2001 年，没有正式的 W3C 规范。最新的 YAML 1.2 规范自 2009 年以来一直保持稳定。

YAML 非常易读，因为它旨在定义配置，而不是作为一种数据传输语言。

尽管 YAML 看起来与 JSON 不同，但 YAML 是 JSON 的超集。作为 JSON 的超集，一个有效的 YAML 文件可以包含 JSON。此外，JSON 也可以转换成 YAML。YAML 本身也可以在其配置文件中包含 JSON。

### YAML 的优势

*   异常易读的语法。
*   紧凑语法，使用 Python 风格的缩进来表示结构。
*   支持独立于语言的对象类型。`int`、`binary`、`str`、`bool`等定标器或`map`、`set`、`pairs`、`seq`等集合。

### YAML 的缺点

*   缩进格式容易出现语法和验证错误。
*   由于缺乏跨所有语言的特性，某些类型的可移植性可能不存在。
*   由于 YAML 的声明性，调试很困难。
*   不存在断点和类似的功能。

作为唯一列出的特定配置语言，HCL 并不打算取代 YAML 或 JSON 等语言。HCL 是一种工具专用语言，用于 Terraform 工具集。HCL 在视觉上类似于 JSON，只是添加了独特的数据结构。

HCL 是三个子语言的组合:

*   结构的
*   表示
*   模板

这些子语言共同创建了一个 HCL 配置。该模式有效地描述了环境配置，这是 Terraform 的主要目的。

其他工具集和语言能够使用 HCL 吗？其他语言也有解析器，比如 Go、Java 和 Python。在这种情况下，可以使用 HCL 作为配置语言。这些解析器通常不是本地包。

### 盐酸的优点

*   使用盐酸时，使用 Terraform 要容易得多。
*   除了兼容之外，视觉上和功能上类似于 JSON。
*   通过属性和模板等特性，HCL 比竞争语言(如 JSON)功能更加全面。

### 盐酸的缺点

*   正如 HashiCorp 的名字所证明的那样，HCL 主要是为其产品开发的，开发也是为了这些目的。
*   尽管声明了与 JSON 的兼容性，但两种语言之间的严格转换由于映射某些语言结构的模糊性而变得复杂。
*   作为一门新语言，许多特性仍在开发中，工具包的成熟度仍在提高。

## 结论

配置语言有很多种，各有优缺点。XML、JSON、YAML 和 HCL 在某种程度上是互操作的，但是根据您选择的语言，权衡是必要的。

简单的应用程序和环境受益于结构化配置。随着配置复杂性的增加，一种语言相对于另一种语言的缺点也在增加。

为了选择正确的语言，在应用程序生命周期的早期确定配置目标是有帮助的。

随着配置本身成为 DevOps 环境和云计算中的一等公民，为您的应用选择正确的语言对于确保成功变得至关重要。尽管这些配置语言都可以很好地工作，但是您需要权衡成功的配置框架的优点和缺点。

愉快的部署！

* * *

Adam Bertram 拥有 20 多年的 IT 经验，是一名经验丰富的在线商务专家。他是多家科技公司的顾问、微软 MVP、博客作者、培训师、出版作家和内容营销人员。在[adamtheautomator.com](http://adamtheautomator.com/)关注亚当的文章，在 [LinkedIn](https://www.linkedin.com/in/adbertram) 联系，或者在 [@adbertram](https://twitter.com/adbertram) 的 Twitter 上关注他。